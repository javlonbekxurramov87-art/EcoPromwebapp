<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ecoprom Shop ‚Äî Telegram WebApp</title>
  <meta name="description" content="Ecoprom ‚Äî eshiklar, qurilish materiallari va konditsionerlar do‚Äòkoni. Zamonaviy, tez va animatsion UI." />
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Ecoprom Shop ‚Äî Qurilish va eshik mahsulotlari">
  <meta property="og:description" content="Eng sifatli qurilish mahsulotlari va eshiklar!">
  <meta property="og:image" content="https://i.ibb.co/fzW6FrTg/2.png">
  <link rel="canonical" href="https://ecoprom-shop.uz/webapp" /> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --green-500:#00c853;
      --green-700:#0aa05a;
      --bg:#f6fbf7;
      --card:#fff;
      --muted:#6b7280;
      --glass: rgba(255,255,255,0.6);
      --radius:14px;
      --shadow: 0 8px 24px rgba(16,24,40,0.08);
      --glass-border: rgba(0,0,0,0.04);
      --max-width:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:linear-gradient(180deg,var(--bg),#eefaf0 60%);color:#111827;-webkit-font-smoothing:antialiased}
    html, body {
        height: 100%; 
        margin: 0;
        padding: 0;
        /* Asosiy oynada skrollni o ªchiramiz, chunki biz uni kontentga o ªtkazamiz */
        overflow: hidden; 
    }
    body {
        height: 100%;
        margin: 0;
        padding: 0;
        /* Vertikal skrollni yoqish */
        overflow-y: auto; 
        /* iOS qurilmalarida skrollni silliqlashtiradi */
        -webkit-overflow-scrolling: touch; 
    }
    header{position:sticky;top:0;z-index:120;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:rgba(255,255,255,0.75);backdrop-filter:blur(6px);border-bottom:1px solid var(--glass-border)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--green-500),var(--green-700));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-family:Orbitron}
    .shop-title{font-weight:700;font-size:18px}
    .header-controls{display:flex;align-items:center;gap:10px}
    .lang-select{position:relative}
    .lang-btn{background:var(--card);border:1px solid var(--glass-border);padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:600}
    .lang-menu{position:absolute;top:110%;left:0;background:var(--card);box-shadow:var(--shadow);border-radius:8px;overflow:hidden;display:none;z-index:20}
    .lang-menu button{display:block;width:100%;padding:8px 12px;border:0;background:none;text-align:left;cursor:pointer}
    .cart-bubble{position:relative;background:linear-gradient(90deg,var(--green-500),var(--green-700));color:white;padding:8px 12px;border-radius:14px;display:flex;gap:8px;align-items:center;cursor:pointer}
    .cart-bubble .count{background:rgba(255,255,255,0.15);padding:4px 8px;border-radius:999px;font-weight:700}

    /* categories carousel */
    .categories-wrap{padding:12px 0;background:transparent}
    .categories{display:flex;gap:10px;padding:6px 18px;border-radius:12px;margin:0 auto;max-width:var(--max-width);align-items:center;overflow-x:auto;position:relative} /* Overflow-x:auto for manual scrolling */
    .cat-track{display:flex;gap:10px;align-items:center;white-space:nowrap;will-change:transform}
    .categories button{white-space:nowrap;background:transparent;border:1px solid transparent;padding:8px 14px;border-radius:999px;cursor:pointer;font-weight:600;transition:transform .22s,background .22s}
    .categories button.active{background:linear-gradient(90deg,var(--green-500),var(--green-700));color:white;transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,200,83,0.12)}
    /* Shadows are removed for manual scroll optimization */
    .categories::after,.categories::before{display:none} 

    /* search area */
    .search-wrap{display:flex;justify-content:center;padding:10px 16px}
    .search{width:100%;max-width:var(--max-width);display:flex;gap:10px;background:var(--card);border-radius:12px;padding:10px;border:1px solid var(--glass-border);align-items:center}
    .search input{border:0;outline:0;padding:6px 8px;width:100%;font-weight:600}

    /* container and grid */
    .container{padding:10px 16px 90px;max-width:var(--max-width);margin:0 auto}
    .top-row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px}
    .card{background:linear-gradient(180deg,var(--card),#fff);border-radius:14px;padding:10px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px;position:relative;overflow:visible;transition:transform .18s,box-shadow .18s}
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(16,24,40,0.12)}
    .media{height:150px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#f6fff6,#ecfff0)}
    .media img{width:100%;height:100%;object-fit:cover}
    .card h4{margin:0;font-size:15px}
    .muted{color:var(--muted);font-size:13px}
    .price-row{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .price{font-weight:800}
    .actions{display:flex;gap:8px}
    .btn{background:var(--green-500);border:0;color:white;padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;border:1px solid var(--glass-border);color:var(--green-700)}

    .fav{position:absolute;top:10px;right:10px;background:rgba(255,255,255,0.9);padding:8px;border-radius:10px;border:1px solid var(--glass-border);cursor:pointer;transition:transform .12s}
    .fav.active{transform:scale(1.05);color:var(--green-700)}

    /* modal */
    .modal{display:none;position:fixed;inset:0;background:rgba(4,10,6,0.45);backdrop-filter:blur(4px);z-index:300;align-items:center;justify-content:center;padding:18px;overflow:auto}
    .modal-content{width:1440px;max-width:820px;max-height: 190vh;background:var(--card);border-radius:16px;padding:18px;box-shadow:0 20px 60px rgba(5,10,6,0.2) }
    .modal-grid{display:grid;grid-template-columns:1fr 360px;gap:14px}
    /* shop.html faylidagi <style> blokida */
    .modal-content > div:last-child > div:nth-child(5) { 
        /* Agar siz o'zingiz qo'shimcha style qo'shgan bo'lsangiz */
        white-space: pre-wrap;
        /* ... va max-height/overflow ham tekshirilishi kerak */
    }

    /* Yoki ushbu: */
    #modalExtraDesc {
        margin-top: 10px;
        white-space: pre-wrap; /* Matnni yangi qatorlar bilan ko'rsatadi */
        color: var(--muted);
    }
    /* === SLIDER CSS START === */
    .slides{
        height:360px;
        border-radius:12px;
        overflow:hidden;
        background:#f8fff9;
        position:relative; /* Relative for absolute controls */
        cursor: grab; /* Swipe qilish mumkinligini bildirish */
    }
    .slide-wrapper{
        display:flex;
        width:100%;
        height:100%;
        transition: transform 0.3s ease-in-out;
        /* üõ†Ô∏è YANGI QO'SHILDI: GPU tezlatish (Hardware Acceleration) */
        will-change: transform; 
    }
    .slide{
        min-width:100%;
        height:100%;
        display:flex;
        align-items:center;
        justify-content:center;
        overflow:hidden;
    }
    .slide img{width:100%;height:100%;object-fit:cover}
    
    .slide-controls{
        position:absolute;
        top:0;
        left:0;
        right:0;
        bottom:0;
        display:flex;
        justify-content:space-between;
        align-items:center;
        pointer-events:none;
        padding:0 8px;
    }
    .slide-control-btn{
        background:rgba(0,0,0,0.4);
        border:none;
        color:white;
        width:36px;
        height:36px;
        border-radius:50%;
        cursor:pointer;
        display:flex;
        align-items:center;
        justify-content:center;
        transition: background 0.2s;
        font-size:16px;
        pointer-events:all;
        backdrop-filter: blur(2px);
    }
    .slide-control-btn:hover{
        background:var(--green-500);
    }
    .slide-control-btn:disabled{
        opacity: 0.5;
        cursor: default;
        background: rgba(0,0,0,0.4);
    }
    
    .slide-indicators{
        position:absolute;
        bottom:8px;
        left:0;
        right:0;
        display:flex;
        justify-content:center;
        gap:6px;
    }
    .slide-indicator{
        width:8px;
        height:8px;
        background:rgba(255,255,255,0.7);
        border-radius:50%;
        transition: background 0.3s;
    }
    .slide-indicator.active{
        background:var(--green-500);
        box-shadow: 0 0 4px rgba(0,0,0,0.3);
    }
    /* === SLIDER CSS END === */

    .specs{margin-top:8px;display:flex;flex-direction:column;gap:6px;font-size:14px}
    .spec{display:flex;justify-content:space-between;color:var(--muted);padding:6px 0;border-bottom:1px dashed #f0f0f0}

    /* cart modal list */
    .cart-item{display:flex;gap:10px;align-items:center;padding:10px 0;border-bottom:1px solid #f0f0f0}
    .cart-media{width:60px;height:60px;border-radius:8px;overflow:hidden;background:var(--bg)}
    .cart-media img{width:100%;height:100%;object-fit:cover}
    .cart-info{flex:1}

    /* floating cart */
    .cart-panel{position:fixed;right:14px;bottom:14px;background:linear-gradient(90deg,var(--green-500),var(--green-700));color:white;padding:12px 14px;border-radius:12px;box-shadow:0 12px 30px rgba(0,200,83,0.18);display:flex;align-items:center;gap:10px;cursor:pointer;z-index:220}

    /* responsive */
    @media (max-width:920px){ 
      .modal-grid{grid-template-columns:1fr} 
      .slides{height:220px} /* üõ†Ô∏è O'zgartirildi: 260px dan 220px ga */
      .media{height:120px} 
    }
    @media (max-width:520px){
      .grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))} header{padding:10px} .shop-title{display:none}
      .categories::after,.categories::before{display:none}
      .slides{height:180px} /* üõ†Ô∏è O'zgartirildi: 220px dan 180px ga */
    }

    /* small helpers */
    .empty-state{text-align:center;padding:36px;color:var(--muted)}
    .badge{font-weight:700;padding:4px 8px;border-radius:8px;background:#f3f4f6;color:#374151}
    /* smooth selection disable */
    button:focus{outline:0}
    /* Notification style for showTinyNotif */
    #tiny-notif { transition: opacity 0.5s ease-out; }
  </style>
</head>
<body>

  <header>
    <div class="brand">
      <div class="logo">EP</div>
      <div>
        <div class="shop-title" id="shopTitle">Ecoprom</div>
      </div>
    </div>

    <div class="header-controls">
      <div class="lang-select">
        <button class="lang-btn" id="langBtn">üá∫üáø O‚Äòz ‚ñæ</button>
        <div class="lang-menu" id="langMenu" role="menu" aria-hidden="true">
          <button onclick="setLang('uz')">üá∫üáø O‚Äòzbekcha</button>
          <button onclick="setLang('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
          <button onclick="setLang('en')">üá¨üáß English</button>
        </div>
      </div>

      <div class="cart-bubble" id="cartCount" title="Savatcha" onclick="openCartModal()">
        <i class="fa-solid fa-cart-shopping"></i>
        <div class="count" id="cartNumber">0</div>
      </div>
    </div>
  </header>

  <div class="categories-wrap">
    <div class="categories" id="categoryBar" aria-hidden="false">
      <div class="cat-track" id="catTrack">
        <button class="active" data-cat="all" onclick="filterCategory('all', event)">üîπ <span data-i18n="all">Barchasi</span></button>
        <button data-cat="panel" onclick="filterCategory('panel', event)">ü™ü <span data-i18n="panel">Panellar</span></button>
        <button data-cat="eshik" onclick="filterCategory('eshik', event)">üö™ <span data-i18n="doors">Eshiklar</span></button>
        <button data-cat="konditsioner" onclick="filterCategory('konditsioner', event)">‚ùÑÔ∏è <span data-i18n="ac">Konditsioner</span></button>
        <button data-cat="qurilish" onclick="filterCategory('qurilish', event)">üè† <span data-i18n="build">Qurilish</span></button>
        </div>
    </div>
  </div>

  <div class="search-wrap">
    <div class="search" role="search">
      <i class="fa-solid fa-magnifying-glass" style="opacity:.6"></i>
      <input id="searchInput" placeholder="Mahsulot qidirish..." aria-label="Mahsulot qidirish..." />
      <button class="btn ghost" onclick="clearFilters()" title="Tozalash"><i class="fa-solid fa-eraser"></i></button>
    </div>
  </div>

  <main class="container" id="main">
    <div class="top-row">
      <div style="display:flex;gap:8px;align-items:center">
        <button class="btn ghost" id="favViewBtn" onclick="viewFavorites()"><i class="fa-regular fa-heart"></i> <span data-i18n="favorites">Sevimlilar</span></button>
      </div>
    </div>

    <div class="grid" id="productList" aria-live="polite"></div>
  </main>

  <div class="modal" id="productModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content">
      <div style="display:flex;justify-content:flex-end"><button class="btn ghost" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button></div>
      <div class="modal-grid">
        <div class="slides" id="slides">
          </div>
        <div>
          <h3 id="modalName">Product</h3>
          <div style="display:flex;gap:12px;align-items:center;margin-top:8px">
            <div class="price" id="modalPrice">0</div> 
            <div class="muted"><span data-i18n="in_stock_label">Omborda</span>: <span id="modalStock">‚Äî</span></div>
          </div>
          <p id="modalShort" class="muted" style="margin-top:8px"></p>

          <div id="modalOptions"></div> <div class="specs" id="modalSpecs"></div>

          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <div style="display:flex;gap:6px;align-items:center">
              <button class="btn ghost" onclick="updateModalQty(-1)">-</button>
              <div id="modalQty" style="min-width:28px;text-align:center;font-weight:800">1</div>
              <button class="btn ghost" onclick="updateModalQty(1)">+</button>
            </div>

            <button class="btn" id="modalAddBtn" onclick="modalAddToCart()"><span data-i18n="add_to_cart">Savatchaga qo‚Äòshish</span></button>
            <button class="btn ghost" id="modalFavBtn" onclick="modalToggleFav()"><i class="fa-regular fa-heart"></i> <span data-i18n="to_favorites">Sevimlilarga</span></button>
          </div>

          <div style="margin-top:10px;white-space:pre-wrap;color:var(--muted)" id="modalExtraDesc"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="cartModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3><span data-i18n="your_cart">üõí Savatingiz</span></h3>
        <button class="btn ghost" onclick="closeCartModal()"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div id="cartList" style="max-height:320px;overflow:auto"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:8px;border-top:1px solid #f0f0f0">
        <div class="muted"><span data-i18n="total">Jami</span>:</div>
        <div id="cartTotal" style="font-weight:800">0</div>
      </div>
      <div style="margin-top:12px;display:flex;gap:10px">
        <button class="btn" id="checkoutBtn" onclick="checkout()"><span data-i18n="checkout">Buyurtma berish</span></button>
        <button class="btn ghost" onclick="continueShopping()"><span data-i18n="continue_shopping">Davom etish</span></button>
      </div>
    </div>
  </div>

  <div id="floatingCart" class="cart-panel" style="display:none" onclick="openCartModal()">
    <i class="fa-solid fa-cart-shopping"></i>
    <div id="floatingCount">0</div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>

    
    // Telegram WebApp init
    const tg = window.Telegram?.WebApp || null;
    
    if (tg) { try { tg.expand(); tg.setHeaderColor('#008744');
    
    tg.setTextColor('#FFFFFF');} catch(e){} }

    // Translations
    const translations = {
      uz:{
        shop:'Ecoprom', all:'Barchasi', doors:'Eshiklar', build:'Qurilish', ac:'Konditsioner', panel:'Panellar',
        search_placeholder:'Mahsulot qidirish...',
        favorites:'Sevimlilar', clear:'Tozalash', add_to_cart:'Savatchaga qo‚Äòshish', to_favorites:'Sevimlilarga',
        in_stock_label:'Omborda', your_cart:'üõí Savatingiz', total:'Jami', checkout:'Buyurtma berish', continue_shopping:'Davom etish',
        no_items:'Hech nima topilmadi.', cart_empty:'Savatcha bo‚Äòsh üòÖ', order_success:'Buyurtmangiz qabul qilindi!', qty:'Miqdor', 
        size: 'O‚Äòlcham', // ‚úÖ O'zgartirildi: Size ga O'lcham
        color: 'Rang', // ‚úÖ YANGI: Rang
        color_default_value: 'Barcha ranglar mavjud', // ‚úÖ YANGI STANDART QIYMAT
        lock_type: 'Qulf turi' // YANGI: Qulf turi
      },
      ru:{
        shop:'Ecoprom', all:'–í—Å–µ', doors:'–î–≤–µ—Ä–∏', build:'–°—Ç—Ä–æ–π–∫–∞', ac:'–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä—ã', panel:'–ü–∞–Ω–µ–ª–∏',
        search_placeholder:'–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...',
        favorites:'–ò–∑–±—Ä–∞–Ω–Ω–æ–µ', clear:'–û—á–∏—Å—Ç–∏—Ç—å', add_to_cart:'–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É', to_favorites:'–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ',
        in_stock_label:'–ù–∞–ª–∏—á–∏–µ', your_cart:'üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞', total:'–ò—Ç–æ–≥–æ', checkout:'–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑', continue_shopping:'–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏',
        no_items:'–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.', cart_empty:'–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòÖ', order_success:'–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!', qty:'–ö–æ–ª-–≤–æ', 
        size: '–†–∞–∑–º–µ—Ä', // ‚úÖ O'zgartirildi: Size ga –†–∞–∑–º–µ—Ä
        color: '–¶–≤–µ—Ç', // ‚úÖ YANGI: –¶–≤–µ—Ç
        color_default_value: '–í—Å–µ —Ü–≤–µ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã', // ‚úÖ YANGI STANDART QIYMAT
        lock_type: '–¢–∏–ø –∑–∞–º–∫–∞' // YANGI: –¢–∏–ø –∑–∞–º–∫–∞
      },
      en:{
        shop:'Ecoprom', all:'All', doors:'Doors', build:'Construction', ac:'Air Conditioners', panel:'Panels',
        search_placeholder:'Search products...',
        favorites:'Favorites', clear:'Clear', add_to_cart:'Add to cart', to_favorites:'To favorites',
        in_stock_label:'Stock', your_cart:'üõí Your Cart', total:'Total', checkout:'Checkout', continue_shopping:'Continue shopping',
        no_items:'Nothing found.', cart_empty:'Cart is empty üòÖ', order_success:'Your order has been accepted!', qty:'Qty', 
        size: 'Size', // ‚úÖ O'zgartirildi: Size ga Size
        color: 'Color', // ‚úÖ YANGI: Color
        color_default_value: 'All colors available', // ‚úÖ YANGI STANDART QIYMAT
        lock_type: 'Lock Type' // YANGI: Lock Type
      }
    };

    // Currency suffix per language
    const CURRENCY = { 
                      uz: " so‚Äòm", 
                      ru: " —Å—É–º",      
                      en: " UZS"   
                    };


    const STOCK_TEXT = { uz: {in:'Bor', out:"Yo'q"}, ru:{in:'–í –Ω–∞–ª–∏—á–∏–∏', out:'–ù–µ—Ç'}, en:{in:'In stock', out:'Out of stock'} };

    let lang = 'uz';
    let currentCategory = 'all';
    let showOnlyFavs = false;

    // VALYUTA KURSI UCHUN O'ZGARUVCHILAR
    let usdSellRate = 12500; // Default kurs (masalan, 12500) API ishlamasa
    const USD_TO_SELL_RATE_MARGIN = 1.0076; // Rasmiy CBU kursiga ustama

    // Products (Narxlar USD da kiritildi)
       const products = [
              //ESHIKLARRRRRRRRRR
              
                      //   {id:1, name:{uz:'F Eshik',ru:'–î–≤–µ—Ä—å F',en:'Door F'}, price:100, category:'eshik', images:['https://i.ibb.co/pvCr94rB/1.png', 'https://i.ibb.co/wFrHKGRs/2.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, desc:{
                      //     uz:`Xususiyatlar:
                      // - Material: Sandwich panellar
                      // - Ramka: Alyuminiy
                      // - Tutqich va mente≈°alar: Plastik
                      // - Mexanizm: Xitoy`,
                      //     ru:`–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                      // - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                      // - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                      // - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ
                      // - –ú–µ—Ö–∞–Ω–∏–∑–º: –ö–∏—Ç–∞–π—Å–∫–∏–π`,
                      //     en:`Specifications:
                      // - Material: Sandwich panels
                      // - Frame: Aluminum
                      // - Handles and hinges: Plastic
                      // - Mechanism: Chinese`
                      //   }, warranty:'6 oy',stock:6, sku:'DR-F',
                      //   // options: [
                              
                      //   //       // ‚úÖ YANGI QO'SHILDI: Rang opsiyasi
                      //   //       { type: 'color', name: {uz: 'Rang', ru: '–¶–≤–µ—Ç', en: 'Color'}, values: [
                      //   //           { value: 'Barcha ranglar mavjud', price_adjust: 0 } 
                      //   //       ]}
                      //   //   ]
                      //   },

                      {id:2, name:{uz:'F1 Eshik',ru:'–î–≤–µ—Ä—å F1',en:'Door F1'}, price:100, category:'eshik', images:['https://i.ibb.co/Kj9zBbDG/3.png','https://i.ibb.co/Vd4CY31/4.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, desc:{
                        uz:`Xususiyatlar:
                    - Material: Sandwich panellar
                    - Ramka: Alyuminiy
                    - Tutqich va mente≈°alar: Plastik
                    - Mexanizm: Xitoy`,
                        ru:`–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                    - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                    - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                    - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ
                    - –ú–µ—Ö–∞–Ω–∏–∑–º: –ö–∏—Ç–∞–π—Å–∫–∏–π`,
                        en:`Specifications:
                    - Material: Sandwich panels
                    - Frame: Aluminum
                    - Handles and hinges: Plastic
                    - Mechanism: Chinese`
                      }, warranty:'6 oy',stock:6, sku:'DR-F1'},

                      {id:3, name:{uz:'F2 Eshik',ru:'–î–≤–µ—Ä—å F2',en:'Door F2'}, price:100, category:'eshik', images:['https://i.ibb.co/hxh8cXFK/5.png','https://i.ibb.co/20ZdDK2M/6.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                     desc: {
                          uz: `Xususiyatlar:
                  - Material: Sandwich panellar
                  - Ramka: Alyuminiyccc (F1 ga nisbatan kengaytirilgan)
                  - Tutqich va mente≈°alar: Plastik (3 ta mente≈°a)`,
                          
                          ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                  - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                  - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è (—É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å F1)
                  - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ (3 –ø–µ—Ç–ª–∏)`,

                          en: `Specifications:
                  - Material: Sandwich panels
                  - Frame: Aluminum (extended compared to F1)
                  - Handles and hinges: Plastic (3 hinges)`
                      }, warranty:'6 oy',stock:6, sku:'DR-F2'},
                    
                      {id:4, name:{uz:'F3 Eshik',ru:'–î–≤–µ—Ä—å F3',en:'Door F3'}, price:100, category:'eshik', images:['https://i.ibb.co/gbdjwy33/7.png','https://i.ibb.co/rqtmgr9/8.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                      desc: {
                            // üá∫üáø O'zbekcha tavsif
                            uz: `Xususiyatlar:
                        - Material: Sandwich panellar
                        - Ramka: Plastik
                        - Tutqich va mente≈°alar: Metall
                        - Mexanizm: Maxsus`,

                            // üá∑üá∫ Ruscha tavsif (Siz bergan matn)
                            ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                        - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                        - –†–∞–º–∞: –ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è
                        - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ
                        - –ú–µ—Ö–∞–Ω–∏–∑–º: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π`,

                            // üá¨üáß Inglizcha tavsif
                            en: `Specifications:
                        - Material: Sandwich panels
                        - Frame: Plastic
                        - Handles and hinges: Metal
                        - Mechanism: Special`
                        }, warranty:'6 oy',stock:6, sku:'DR-F3'},

                        {id:5, name:{uz:'F4 Eshik',ru:'–î–≤–µ—Ä—å F4',en:'Door F4'}, price:100, category:'eshik', images:['https://i.ibb.co/3Y4BhGMm/9.png','https://i.ibb.co/XqyXQQ2/10.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                      desc: {
                            // üá∫üáø –£–∑–±–µ–∫—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            uz: `Xususiyatlar:
                        - Material: Sandwich panellar
                        - Ramka: Plastik`,

                            // üá∑üá∫ –†—É—Å—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                        - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                        - –†–∞–º–∞: –ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è`,

                            // üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            en: `Specifications:
                        - Material: Sandwich panels
                        - Frame: Plastic`
                        }, warranty:'6 oy',stock:6, sku:'DR-F4'},

                        {id:6, name:{uz:'F5 Eshik',ru:'–î–≤–µ—Ä—å F5',en:'Door F5'}, price:100, category:'eshik', images:['https://i.ibb.co/Rp2sPZFm/11.png','https://i.ibb.co/wrR9ftK2/12.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                      desc: {
                            // üá∫üáø –£–∑–±–µ–∫—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            uz: `Xususiyatlar:
                        - Material: Sandwich panellar
                        - Ramka: Plastik
                        - Tutqich va mente≈°alar: Metall`,

                            // üá∑üá∫ –†—É—Å—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                        - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                        - –†–∞–º–∞: –ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è
                        - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ`,

                            // üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            en: `Specifications:
                        - Material: Sandwich panels
                        - Frame: Plastic
                        - Handles and hinges: Metal`
                        }, warranty:'6 oy',stock:6, sku:'DR-F5'},

                        {id:7, name:{uz:'F6 Eshik',ru:'–î–≤–µ—Ä—å F6',en:'Door F6'}, price:100, category:'eshik', images:['https://i.ibb.co/xtdQGK83/13.png','https://i.ibb.co/FqcVx2yk/14.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                      desc: {
        // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                                uz: `Xususiyatlar:
                        - Material: Sandwich panellar
                        - Ramka: Alyuminiy
                        - Mente≈°alar: Turkiya plastigi
                        - Tutqich: Egri to‚Äòsiqcha
                        - Konstruktsiya: Ikki qanotli mayatnik eshik
                        - Xususiyatlar: Shisha oynachalar
                        - Ochildi yo‚Äònalishi: Ikkala tomonga`,

                                ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                        - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                        - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                        - –ü–µ—Ç–ª–∏: –¢—É—Ä–µ—Ü–∫–∏–µ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ
                        - –†—É—á–∫–∞: –ò–∑–æ–≥–Ω—É—Ç—ã–π –æ—Ç–±–æ–π–Ω–∏–∫
                        - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –î–≤—É—Ö—Å—Ç–≤–æ—Ä—á–∞—Ç–∞—è –º–∞—è—Ç–Ω–∏–∫–æ–≤–∞—è –¥–≤–µ—Ä—å
                        - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∏–ª–ª—é–º–∏–Ω–∞—Ç–æ—Ä—ã
                        - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è: –í –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã`,

                                en: `Specifications:
                        - Material: Sandwich panels
                        - Frame: Aluminum
                        - Hinges: Turkish plastic
                        - Handle: Curved bumper
                        - Design: Double-leaf swing door
                        - Features: Glass windows
                        - Opening direction: Both sides`
                            }, warranty:'6 oy',stock:6, sku:'DR-F6'},

                           {id:8, name:{uz:'F7 Eshik',ru:'–î–≤–µ—Ä—å F7',en:'Door F7'}, price:100, category:'eshik', images:['https://i.ibb.co/v46fBbnB/15.png','https://i.ibb.co/DffTrMCW/16.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                      desc: {
        // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                            uz: `Xususiyatlar:
                    - Material: Sandwich panellar
                    - Ramka: Alyuminiy
                    - Mente≈°alar: Turkiya plastigi
                    - Tutqich: PVX egri to‚Äòsiqcha
                    - Konstruktsiya: Bir qanotli mayatnik eshik`,

                            ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                    - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                    - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                    - –ü–µ—Ç–ª–∏: –¢—É—Ä–µ—Ü–∫–∏–µ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ
                    - –†—É—á–∫–∞: –ò–∑–æ–≥–Ω—É—Ç—ã–π –æ—Ç–±–æ–π–Ω–∏–∫ –∏–∑ –ü–í–•
                    - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û–¥–Ω–æ—Å—Ç–≤–æ—Ä—á–∞—Ç–∞—è –º–∞—è—Ç–Ω–∏–∫–æ–≤–∞—è –¥–≤–µ—Ä—å`,

                            en: `Specifications:
                    - Material: Sandwich panels
                    - Frame: Aluminum
                    - Hinges: Turkish plastic
                    - Handle: PVC curved bumper
                    - Design: Single-leaf swing door`
                        }, warranty:'6 oy',stock:6, sku:'DR-F7'},

                        {id:9, name:{uz:'F8 Eshik',ru:'–î–≤–µ—Ä—å F8',en:'Door F8'}, price:100, category:'eshik', images:['https://i.ibb.co/6cBwbLss/17.png','https://i.ibb.co/Z1hd3L4Z/18.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                     desc: {
        // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                          uz: `Xususiyatlar:
                  - Material: Sandwich panellar
                  - Ramka: Alyuminiy
                  - Tutqich va mente≈°alar: Metall
                  - Konstruktsiya: S√ºriluvchi eshik
                  - Xususiyatlar: Maxsus rels va roliklar, tutqich va tutqich mexanizmi, pastki ramkasiz (arava va transport uchun)`,

                          ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                  - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                  - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                  - –†—É—á–∫–∏ –∏ –ø–µ—Ç–ª–∏: –ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ
                  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û—Ç–∫–∞—Ç–Ω–∞—è –¥–≤–µ—Ä—å
                  - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ª—å—Å –∏ —Ä–æ–ª–∏–∫–∏, —Ä—É—á–∫–∞ –∏ —Ä—ã—á–∞–≥ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∏–∂–Ω–µ–π —Ä–∞–º—ã (–¥–ª—è –∑–∞–µ–∑–¥–∞ —Ç–µ–ª–µ–∂–µ–∫ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤)`,

                          en: `Specifications:
                  - Material: Sandwich panels
                  - Frame: Aluminum
                  - Handles and hinges: Metal
                  - Design: Sliding door
                  - Features: Special rail and rollers, handle and opening lever, no bottom frame (for carts and vehicles)`
                      }, warranty:'6 oy',stock:6, sku:'DR-F8'},


                       {id:10, name:{uz:'F9 Eshik',ru:'–î–≤–µ—Ä—å F9',en:'Door F9'}, price:100, category:'eshik', images:['https://i.ibb.co/SDhMZV7t/19.png','https://i.ibb.co/mVJQx07B/20.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                    desc: {
                          // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                          uz: `Xususiyatlar:
                  - Material: Sandwich panellar
                  - Ramka: Alyuminiy
                  - Konstruktsiya: S√ºriluvchi eshik (F8 bilan o‚Äòxshash)
                  - Xususiyatlar: Zanjirli qulflash mexanizmi, tutqichsiz dizayn`,

                          ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                  - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                  - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û—Ç–∫–∞—Ç–Ω–∞—è –¥–≤–µ—Ä—å, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è F8
                  - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–º–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Ü–µ–ø—å—é, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä—É—á–∫–∏`,

                          en: `Specifications:
                  - Material: Sandwich panels
                  - Frame: Aluminum
                  - Design: Sliding door (similar to F8)
                  - Features: Chain-based lock mechanism, no handle`
                      }, warranty:'6 oy',stock:6, sku:'DR-F9'},



                      // kondentsionerrrrr

                      {id:11, name: {
                              uz: "WALK-IN Muzlatish Kamerasi",
                              ru: "WALK-IN –ú–æ—Ä–æ–∑–∏–ª—å–Ω–∞—è –ö–∞–º–µ—Ä–∞",
                              en: "WALK-IN Freezer Cold Room"
                            }, 
                            
                            price:100, category:'konditsioner', images:['https://i.ibb.co/LzsjFKLv/24.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                                  desc: {
                                  uz: `Bizning sovutgich va muzlatkich kameralarimiz mahsulotingizni uzoq muddat davomida yangiligini saqlab qolish uchun ideal yechimdir. Ular tibbiyot muassasalarida dori vositalarini, gullarni, go‚Äòshtni, baliqni, mevalarni va muzqaymoqni ishonchli saqlashni ta‚Äôminlaydi. Innovatsion yechimlarimiz yordamida mahsulotingiz har qanday sharoitda doimo yangi va sifatli bo‚Äòlib qoladi. Bizning kameralarni tanlab, siz ishonchlilikni, energiya tejamkorligini va eng yuqori saqlash standartlarini tanlaysiz.`,

                                  ru: `–ù–∞—à–∏ —Ö–æ–ª–æ–¥–∏–ª—å–Ω—ã–µ –∏ –º–æ—Ä–æ–∑–∏–ª—å–Ω—ã–µ –∫–∞–º–µ—Ä—ã –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏ –≤–∞—à–µ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤ –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏—è—Ö, —Ü–≤–µ—Ç–æ–≤, –º—è—Å–∞, —Ä—ã–±—ã, —Ñ—Ä—É–∫—Ç–æ–≤ –∏ –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ. –ë–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞—à–∏–º –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º –≤–∞—à–∞ –ø—Ä–æ–¥—É–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Å–≤–µ–∂–µ–π –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —É—Å–ª–æ–≤–∏–π —Ö—Ä–∞–Ω–µ–Ω–∏—è. –í—ã–±–∏—Ä–∞—è –Ω–∞—à–∏ –∫–∞–º–µ—Ä—ã, –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –≤—ã—Å–æ—á–∞–π—à–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è.`,

                                  en: `Our refrigeration and freezing chambers are perfect for long-term preservation of your products' freshness. They provide reliable storage for medicines in medical institutions, flowers, meat, fish, fruits, and ice cream. With our innovative solutions, your products will always remain fresh and high-quality regardless of storage conditions. By choosing our chambers, you choose reliability, energy efficiency, and the highest storage standards.`
                                }, warranty:'6 oy',stock:6, sku:'DR-F9'},

                      {id:12, name: {
                                      uz: "Muzqaymoq uchun kamera",
                                      ru: "–ö–∞–º–µ—Ä–∞ –¥–ª—è –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ",
                                      en: "Ice Cream Storage Chamber"
                                    }, price:100, category:'konditsioner', images:['https://i.ibb.co/twc1XRfc/25.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                                desc: {
                          // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–êdesc: {
                                      uz: `Harorat rejimi: -20¬∞C dan -25¬∞C gacha ‚Äî muzqaymoqni uzoq muddatli saqlash uchun ideal. Xususiyatlar: Turli xil muzqaymoqlarni tartibli joylashtirish va qulay kirish uchun maxsus panjaralar yoki javonlar bilan jihozlangan.`,

                                      ru: `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º: –æ—Ç -20¬∞C –¥–æ -25¬∞C ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –û—Å–Ω–∞—â–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Ä–µ—à–µ—Ç–∫–∞–º–∏ –∏–ª–∏ –ø–æ–ª–∫–∞–º–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –≤–∏–¥–∞–º –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ.`,

                                      en: `Temperature range: from -20¬∞C to -25¬∞C ‚Äî ideal for long-term ice cream storage. Features: Equipped with special racks or shelves for convenient organization and easy access to various types of ice cream.`
                                    }, warranty:'6 oy',stock:6, sku:'DR-F9'},


                      {id:13,   
                                name: {
                                    uz: "Sabzavot va mevalar uchun kamera",
                                    ru: "–ö–∞–º–µ—Ä–∞ –¥–ª—è –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤",
                                    en: "Vegetable and Fruit Storage Chamber"
                                  }, price:100, category:'konditsioner', images:['https://i.ibb.co/xK8Hk6TM/26.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                                desc: {
                                    uz: `Harorat rejimi: +6¬∞C dan +10¬∞C gacha ‚Äî sabzavot va mevalarni yangiligicha saqlash uchun mo‚Äòljallangan. Xususiyatlar: Optimal shamollatish va sozlanadigan namlik darajasi sabzavot va mevalarning saqlanish muddatini uzaytiradi. Tashkiliy qulaylik uchun turli javonlar va savatchalar bilan jihozlangan.`,

                                    ru: `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º: –æ—Ç +6¬∞C –¥–æ +10¬∞C ‚Äî –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤ –≤ —Å–≤–µ–∂–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è –∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤. –û—Å–Ω–∞—â–µ–Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–æ–ª–∫–∞–º–∏ –∏ –∫–æ—Ä–∑–∏–Ω–∞–º–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.`,

                                    en: `Temperature range: from +6¬∞C to +10¬∞C ‚Äî designed to keep vegetables and fruits fresh. Features: Optimal ventilation and adjustable humidity extend the shelf life of produce. Equipped with various shelves and baskets for convenient organization.`
                                  }, warranty:'6 oy',stock:6, sku:'DR-F9'},

                    
                     {id:14, 
                              name: {
                                      uz: "Mol go‚Äòshti uchun kamera",
                                      ru: "–ö–∞–º–µ—Ä–∞ –¥–ª—è –≥–æ–≤—è–¥–∏–Ω—ã",
                                      en: "Beef Storage Chamber"
                                    }, price:100, category:'konditsioner', images:['https://i.ibb.co/cKxQGBF7/27.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                                desc: {
                                        uz: `Harorat rejimi: +1¬∞C dan +4¬∞C gacha ‚Äî yangi mol go‚Äòshtini optimal saqlash uchun mo‚Äòljallangan. Xususiyatlar: Mol go‚Äòshtining turli qismlarini alohida saqlash uchun zonalarga bo‚Äòlingan bo‚Äòlib, bu har bir qism uchun eng qulay saqlash sharoitini ta‚Äôminlaydi.`,

                                        ru: `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º: –æ—Ç +1¬∞C –¥–æ +4¬∞C ‚Äî –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤–µ–∂–µ–π –≥–æ–≤—è–¥–∏–Ω—ã. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –†–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –∑–æ–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —á–∞—Å—Ç–µ–π –º—è—Å–∞, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö.`,

                                        en: `Temperature range: from +1¬∞C to +4¬∞C ‚Äî designed for optimal storage of fresh beef. Features: Divided into zones for different beef cuts, ensuring ideal storage conditions for each section.`
                                      }, warranty:'6 oy',stock:6, sku:'DR-F9'},


                       {id:15, 
                                    name: {
                                            uz: "Baliq uchun kamera",
                                            ru: "–ö–∞–º–µ—Ä–∞ –¥–ª—è —Ä—ã–±—ã",
                                            en: "Fish Storage Chamber"
                                          }, price:100, category:'konditsioner',
                                          images:['https://i.ibb.co/MDvBt4Zq/28.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                                     desc: {
                                        uz: `Harorat rejimi: -2¬∞C dan +2¬∞C gacha ‚Äî baliqning yangiligini saqlash uchun mo‚Äòljallangan. Xususiyatlar: Namlikni saqlab turish uchun suv oqizish imkoniyatiga ega maxsus javonlar yoki laganlar bilan jihozlangan.`,

                                        ru: `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º: –æ—Ç -2¬∞C –¥–æ +2¬∞C ‚Äî –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏ —Ä—ã–±—ã. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –û—Å–Ω–∞—â–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª–∫–∞–º–∏ –∏–ª–∏ –ª–æ—Ç–∫–∞–º–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–ª–∏–≤–∞ –≤–æ–¥—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏.`,

                                        en: `Temperature range: from -2¬∞C to +2¬∞C ‚Äî designed to preserve fish freshness. Features: Equipped with special shelves or trays with water drainage capability to maintain proper humidity levels.`
                                      }, warranty:'6 oy',stock:6, sku:'DR-F9'},


                    {id:16, 
                          name: {
                                  uz: "Dori vositalari uchun kamera",
                                  ru: "–ö–∞–º–µ—Ä–∞ –¥–ª—è –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤",
                                  en: "Medical Storage Chamber"
                                }, price:100, category:'konditsioner',
                                images:['https://i.ibb.co/Mxb7XYpz/29.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                            desc: {
                                  uz: `Harorat rejimi: +2¬∞C dan +8¬∞C gacha ‚Äî dori vositalarini xavfsiz saqlash uchun mo‚Äòljallangan. Xususiyatlar: Dori vositalarining xavfsizligini ta‚Äôminlash uchun haroratni kuzatish tizimi va favqulodda ogohlantirish funksiyasi bilan jihozlangan.`,

                                  ru: `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º: –æ—Ç +2¬∞C –¥–æ +8¬∞C ‚Äî –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –û—Å–Ω–∞—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —Å –∞–≤–∞—Ä–∏–π–Ω—ã–º –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤.`,

                                  en: `Temperature range: from +2¬∞C to +8¬∞C ‚Äî designed for safe storage of medicines. Features: Equipped with a temperature monitoring system and emergency alert function to ensure the safety of pharmaceuticals.`
                                },warranty:'6 oy',stock:6, sku:'DR-F9'},


                      {id:17, name:{uz:'konditsioner',ru:'konditsioner9',en:'konditsioner'}, price:100, category:'konditsioner', images:['https://i.ibb.co/SY53hFB/30.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                    desc: {
                          // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                          uz: `Xususiyatlar:
                  - Material: Sandwich panellar
                  - Ramka: Alyuminiy
                  - Konstruktsiya: S√ºriluvchi eshik (F8 bilan o‚Äòxshash)
                  - Xususiyatlar: Zanjirli qulflash mexanizmi, tutqichsiz dizayn`,

                          ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                  - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                  - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û—Ç–∫–∞—Ç–Ω–∞—è –¥–≤–µ—Ä—å, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è F8
                  - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–º–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Ü–µ–ø—å—é, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä—É—á–∫–∏`,

                          en: `Specifications:
                  - Material: Sandwich panels
                  - Frame: Aluminum
                  - Design: Sliding door (similar to F8)
                  - Features: Chain-based lock mechanism, no handle`
                      }, warranty:'6 oy',stock:6, sku:'DR-F9'},



                    {id:18, name:{uz:'konditsioner',ru:'konditsioner9',en:'konditsioner'}, price:100, category:'konditsioner', images:['https://i.ibb.co/ynbFCf2q/31.png'], short:{uz:'Material: Sandwich panel',ru:'–ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏',en:'Material: Sandwich panel'}, 
                    desc: {
                          // üëá –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ù–ê –¢–†–ï–• –Ø–ó–´–ö–ê–•:
                          uz: `Xususiyatlar:
                  - Material: Sandwich panellar
                  - Ramka: Alyuminiy
                  - Konstruktsiya: S√ºriluvchi eshik (F8 bilan o‚Äòxshash)
                  - Xususiyatlar: Zanjirli qulflash mexanizmi, tutqichsiz dizayn`,

                          ru: `–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
                  - –ú–∞—Ç–µ—Ä–∏–∞–ª: –°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª–∏
                  - –†–∞–º–∞: –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è
                  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û—Ç–∫–∞—Ç–Ω–∞—è –¥–≤–µ—Ä—å, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è F8
                  - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–º–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Ü–µ–ø—å—é, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä—É—á–∫–∏`,

                          en: `Specifications:
                  - Material: Sandwich panels
                  - Frame: Aluminum
                  - Design: Sliding door (similar to F8)
                  - Features: Chain-based lock mechanism, no handle`
                      }, warranty:'6 oy',stock:6, sku:'DR-F9'},

                               

                                        


  // PANELLLL
  {id:22, name:{uz:'Yashirin Zamokli PIR Panel',ru:'–ü–æ—Ç–∞–π–Ω–∞—è PIR –ø–∞–Ω–µ–ª—å —Å –∑–∞–º–∫–æ–≤—ã–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º',en:'Hidden lock PIR panel'}, price:27, category:'panel', images:['https://i.ibb.co/NdFPCV5Y/23.png'], short:{uz:'Zamonaviy dizayn',ru:'–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω',en:'Modern design'}, desc:{uz:'Sandwich panel ¬∑ Ramka: Alyuminiy',ru:'–°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª—å ¬∑ –ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è —Ä–∞–º–∞',en:'Sandwich panel ¬∑ Aluminum frame'}, warranty:'6 oy',stock:3, sku:'DR-F18',
  // ‚úÖ O'ZGARISH: Razmer opsiyalarini qo'shish
    options: [
        { type: 'size', name: {uz: 'O‚Äòlcham', ru: '–†–∞–∑–º–µ—Ä', en: 'Size'}, values: [
            // ... (mavjud o'lchamlar)
            { value: '5cm', price_adjust: 0 },
            { value: '8cm', price_adjust: 2 }, 
            
        ]},
        // ‚úÖ YANGI QO'SHILDI: Rang opsiyasi
        { type: 'color', name: {uz: 'Rang', ru: '–¶–≤–µ—Ç', en: 'Color'}, values: [
            { value: 'Barcha ranglar mavjud', price_adjust: 0 } 
        ]}
    ]
},

  {id:23, name:{uz:'PUR Panel',ru:'PUR –ü–∞–Ω–µ–ª—å',en:'PUR Panel'}, price:27, category:'panel', images:['https://i.ibb.co/B51h8gCm/22.png'], short:{uz:'Soddaligi va chidamliligi bilan ajraladi',ru:'–ü—Ä–æ—Å—Ç–∞—è –∏ –ø—Ä–æ—á–Ω–∞—è',en:'Simple and durable'}, desc:{uz:'Ramka: Alyuminiy ¬∑ Mexanizm: Xitoy',ru:'–ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è —Ä–∞–º–∞ ¬∑ –ö–∏—Ç–∞–π—Å–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º',en:'Aluminum frame ¬∑ Chinese mechanism'}, warranty:'6 oy',stock:3, sku:'DR-F19',
  options: [
        // 1. O'lcham opsiyasi (Size)
        { type: 'size', name: {uz: 'O‚Äòlcham', ru: '–†–∞–∑–º–µ—Ä', en: 'Size'}, values: [
            // ... (mavjud o'lchamlar)
            { value: '5cm', price_adjust: 0 },
            { value: '8cm', price_adjust: 2 }, 
            { value: '10cm', price_adjust: 35 }, 
            { value: '15cm', price_adjust: 43 },
        ]},
        // ‚úÖ 2. Qulf turi opsiyasi (Lock Type)
        { type: 'lock_type', name: {uz: 'Qulf turi', ru: '–¢–∏–ø –∑–∞–º–∫–∞', en: 'Lock Type'}, values: [
            { value: 'Zamokli', price_adjust: 0 },
            { value: 'Zamoksiz', price_adjust: 15 } // Zamoq qo'shilishi uchun +$15
        ]},
        // ‚úÖ YANGI QO'SHILDI: Rang opsiyasi
        { type: 'color', name: {uz: 'Rang', ru: '–¶–≤–µ—Ç', en: 'Color'}, values: [
            { value: 'Barcha ranglar mavjud', price_adjust: 0 } 
        ]}
    ]

}, 

  {id:24, name:{uz:'Panel',ru:'Panel',en:'Panel'}, price:100, category:'panel', images:['https://i.ibb.co/1jsNDYx/21.png'], short:{uz:'Issiqlikni yaxshi saqlaydi',ru:'–•–æ—Ä–æ—à–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–ø–ª–æ',en:'Keeps heat well'}, desc:{uz:'Sandwich panel ¬∑ Yengil konstruktsiya',ru:'–°—ç–Ω–¥–≤–∏—á –ø–∞–Ω–µ–ª—å ¬∑ –õ—ë–≥–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è',en:'Sandwich panel ¬∑ Lightweight construction'}, warranty:'6 oy',stock:3, sku:'DR-F20',
  options: [
    { type: 'color', name: {uz: 'Rang', ru: '–¶–≤–µ—Ç', en: 'Color'}, values: [
            { value: 'Barcha ranglar mavjud', price_adjust: 0 } 
        ]}
  ]
},

  
];


    // localStorage keys
    const CART_KEY = 'ecoprom_cart_v2';
    const FAV_KEY = 'ecoprom_fav_v2';

    // app state
    // ‚úÖ O'ZGARISH: cart obyektida endi options va price_adjust saqlanadi
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]'); // [{id, qty, options: {}, price_adjust: 0}]
    let favs = JSON.parse(localStorage.getItem(FAV_KEY) || '[]');   // [id,id]
    let activeProduct = null;
    let modalQty = 1;
    // ‚úÖ YANGI O'ZGARUVCHILAR: Tanlangan variantlar va ularning narxga ta'siri
    let selectedOptions = {}; 
    let currentPriceAdjustment = 0; 
    let currentSlide = 0; // ‚úÖ SLIDER UCHUN YANGI: Aktiv slayd indexi
    
    // ‚úÖ SWIPE UCHUN YANGI O'ZGARUVCHILAR
    let touchStartX = 0;
    const SWIPE_THRESHOLD = 50; // Minimum surish masofasi (px)

    // dom refs
    const productList = document.getElementById('productList');
    const cartNumber = document.getElementById('cartNumber');
    const floatingCount = document.getElementById('floatingCount');
    const slidesDiv = document.getElementById('slides');
    const productModal = document.getElementById('productModal');
    const cartModal = document.getElementById('cartModal');
    const cartListDiv = document.getElementById('cartList');
    const cartTotalDiv = document.getElementById('cartTotal');
    const modalName = document.getElementById('modalName');
    const modalPrice = document.getElementById('modalPrice');
    const modalShort = document.getElementById('modalShort');
    const modalSpecs = document.getElementById('modalSpecs');
    const modalExtraDesc = document.getElementById('modalExtraDesc');
    const modalQtySpan = document.getElementById('modalQty');
    const modalStockSpan = document.getElementById('modalStock');
    const langBtn = document.getElementById('langBtn');
    const langMenu = document.getElementById('langMenu');
    const catTrack = document.getElementById('catTrack');
    const modalOptionsDiv = document.getElementById('modalOptions'); // ‚úÖ YANGI DOM REF

    // CBU API dan joriy valyuta kursini olish
    async function fetchExchangeRate(){
      const CBU_API = 'https://cbu.uz/uz/arkhiv-kursov-valyut/json/all/';
      try {
        const response = await fetch(CBU_API);
        if (!response.ok) throw new Error('API dan kursni olishda xatolik');
        
        const data = await response.json();
        const usdRateData = data.find(c => c.Ccy === 'USD');
        
        if (usdRateData && usdRateData.Rate) {
          const officialRate = parseFloat(usdRateData.Rate);
          
          // Rasmiy kursni Sotish kursi (Sell Rate) ni simulyatsiya qilish uchun marja bilan yangilash
          // Math.round ishlatiladi, chunki UZS kurslari butun son bo'lishi kerak.
          usdSellRate = Math.round(officialRate * USD_TO_SELL_RATE_MARGIN); 
          console.log(`Valyuta kursi yangilandi. USD/UZS (Sell): ${usdSellRate}`);
        } else {
          console.warn("API dan USD kursini topib bo'lmadi, default kurs ishlatiladi.");
        }
      } catch (error) {
        console.error("Valyuta kursini yuklashda muammo:", error);
      }
    }


    // init
    updateTexts();

    async function initApp(){
        await fetchExchangeRate(); // Kursni yuklab olishni kutish

        renderProducts();
        updateCartCount();
        renderFloatingCart();
        reflectFavBtnState();
    }

    initApp(); // initApp ni chaqirish

    // language toggle
    langBtn.onclick = ()=> { langMenu.style.display = langMenu.style.display === 'block' ? 'none' : 'block'; }
    document.addEventListener('click', e => { if(!e.target.closest('.lang-select')) langMenu.style.display = 'none'; });

    function setLang(l){
      lang = l;
      updateTexts();
      renderProducts();
      if (productModal.style.display === 'flex' && activeProduct) openProductModal(activeProduct.id); // update modal texts
      if (cartModal.style.display === 'flex') renderCartList();
      langMenu.style.display = 'none';
      langBtn.innerText = l==='uz' ? 'üá∫üáø O‚Äòz ‚ñæ' : l==='ru' ? 'üá∑üá∫ –†—É ‚ñæ' : 'üá¨üáß En ‚ñæ';
    }

    function updateTexts(){
      document.getElementById('shopTitle').innerText = translations[lang].shop;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) el.innerText = translations[lang][key];
      });
      document.getElementById('searchInput').placeholder = translations[lang].search_placeholder;
    }

    // formatting
    function formatPrice(usdPrice){
      // Narxni USD da olib, uni sotish kursi (sell rate) ga ko'paytiramiz
      const totalUzs = Math.round(usdPrice * usdSellRate);
      
      // So'm qiymatini bo'shliqlar bilan formatlash
      const s = totalUzs.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");
      return s + CURRENCY[lang];
    }

    function getById(id){ return products.find(p => p.id === id) }

    // Render products grid
    function renderProducts(){
      const q = (document.getElementById('searchInput').value || '').toLowerCase().trim();
      
      // Yangi filtr: Faqat omborda bor mahsulotlar ko'rsatiladi (p.stock > 0)
      let filtered = products.filter(p => 
        (p.stock > 0) &&
        (currentCategory === 'all' || p.category === currentCategory)
      ); 

      if (q) filtered = filtered.filter(p => (p.name[lang]||p.name.uz).toLowerCase().includes(q) || (p.short[lang]||'').toLowerCase().includes(q) || (p.desc[lang]||'').toLowerCase().includes(q));
      
      // Eslatma: Sevimlilar ro'yxati (showOnlyFavs) filtrlangandan so'ng amalga oshiriladi
      if (showOnlyFavs) filtered = filtered.filter(p => favs.includes(p.id));

      productList.innerHTML = '';
      if (filtered.length === 0){
        productList.innerHTML = `<div class="empty-state">${translations[lang].no_items}</div>`;
        return;
      }

      filtered.forEach(p=>{
        // Kartochkadagi narx doimo bazaviy narxni ko'rsatadi
        const basePrice = p.price + (p.options?.[0]?.values?.[0]?.price_adjust || 0); // Agar opts bo'lsa, eng arzonini hisobga olish
        
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="media" onclick="openProductModal(${p.id})">
            <img src="${p.images[0]}" alt="${escapeHtml(p.name[lang]||p.name.uz)}" loading="lazy">
          </div>
          <div class="price-row">
            <h4>${escapeHtml(p.name[lang]||p.name.uz)}</h4>
          </div>
          <div class="muted">${escapeHtml(p.short[lang]||p.short.uz||'')}</div>
          <div class="price-row">
            <div class="price">${formatPrice(basePrice)}</div>
            
            <div class="actions">
              <button class="btn" onclick="openProductModal(${p.id})">+</button>
            </div>

          </div>
          <div class="fav ${favs.includes(p.id)?'active':''}" onclick="toggleFav(event,${p.id})"><i class="${favs.includes(p.id)?'fa-solid':'fa-regular'} fa-heart"></i></div>
        `;
        productList.appendChild(card);
      });
    }

    // helpers
    function escapeHtml(s){ return (s||'').toString().replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;') }

    document.getElementById('searchInput').addEventListener('input', ()=>{
      showOnlyFavs = false;
      document.getElementById('favViewBtn').classList.remove('active');
      renderProducts();
    });

    function filterCategory(cat, e){
      currentCategory = cat;
      showOnlyFavs = false;
      document.getElementById('favViewBtn').classList.remove('active');
      document.querySelectorAll('.categories button').forEach(b=>b.classList.remove('active'));
      if (e && e.currentTarget) e.currentTarget.classList.add('active');
      renderProducts();
    }

    function clearFilters(){
      document.getElementById('searchInput').value = '';
      currentCategory = 'all';
      showOnlyFavs = false;
      document.querySelectorAll('.categories button').forEach(b=>b.classList.remove('active'));
      document.querySelector('.categories button[data-cat="all"]')?.classList.add('active');
      renderProducts();
    }

    // favorites
    function toggleFav(e, id){
      e.stopPropagation();
      const idx = favs.indexOf(id);
      if (idx===-1) favs.push(id); else favs.splice(idx,1);
      localStorage.setItem(FAV_KEY, JSON.stringify(favs));
      renderProducts();
      reflectFavBtnState();
    }

    function viewFavorites(){
      showOnlyFavs = !showOnlyFavs;
      if (showOnlyFavs){
        currentCategory = 'all';
        document.querySelectorAll('.categories button').forEach(b=>b.classList.remove('active'));
        document.querySelector('.categories button[data-cat="all"]')?.classList.add('active');
      }
      reflectFavBtnState();
      renderProducts();
    }

    function reflectFavBtnState(){
      const btn = document.getElementById('favViewBtn');
      if (showOnlyFavs) btn.classList.add('active'); else btn.classList.remove('active');
      // hide if no favs
      if (favs.length === 0) btn.style.display = 'none'; else btn.style.display = 'inline-flex';
    }
    
    // ‚úÖ YANGI FUNKSIYA: Mahsulot modalidagi jami narxni hisoblash va yangilash
    function updateModalTotal(){
        if (!activeProduct) return;
        
        // Narxga bazaviy narx + tanlangan variant bo'yicha narx o'zgarishini qo'shish
        const basePrice = activeProduct.price + currentPriceAdjustment; 
        
        // Narxni USD da olib, uni tanlangan miqdorga ko'paytirish
        const totalUsd = basePrice * modalQty;
        
        // Formatlab, modalga joylash
        modalPrice.innerText = formatPrice(totalUsd);
    }
    
    // ‚úÖ YANGI FUNKSIYA: Variantni tanlash (masalan, razmer/lock_type)
    window.selectOption = function(type, value, priceAdjust){
        selectedOptions[type] = value;
        
        // Jami narx o'zgarishini qayta hisoblash
        currentPriceAdjustment = 0;
        activeProduct.options.forEach(option => {
            if (selectedOptions[option.type]) {
                const selectedValue = option.values.find(v => v.value === selectedOptions[option.type]);
                if (selectedValue) {
                    currentPriceAdjustment += (selectedValue.price_adjust || 0);
                }
            }
        });
        
        updateModalTotal(); 
    }
    
    // ------------------------------------------------------------------
    // ‚úÖ SLIDER FUNKSIYALARI START (Swipe qo'shildi)
    // ------------------------------------------------------------------
    function initSlider(images){
      currentSlide = 0; // Har doim 0-slayddan boshlaymiz
      slidesDiv.innerHTML = ''; // Tozalash
      
      const slideWrapper = document.createElement('div');
      slideWrapper.className = 'slide-wrapper';
      slideWrapper.id = 'slideWrapper';
      
      // Har bir rasm uchun slayd elementini yaratish
      images.forEach(src => {
        const slide = document.createElement('div');
        slide.className = 'slide';
        slide.innerHTML = `<img src="${src}" alt="Product image" loading="lazy">`;
        slideWrapper.appendChild(slide);
      });
      slidesDiv.appendChild(slideWrapper);
      
      // Slayd boshqaruv elementlarini qo'shish (faqat 1+ slayd bo'lsa)
      if (images.length > 1) {
        slidesDiv.innerHTML += `
          <div class="slide-controls">
            <button class="slide-control-btn" id="prevSlideBtn" onclick="changeSlide(-1)"><i class="fa-solid fa-chevron-left"></i></button>
            <button class="slide-control-btn" id="nextSlideBtn" onclick="changeSlide(1)"><i class="fa-solid fa-chevron-right"></i></button>
          </div>
          <div class="slide-indicators" id="slideIndicators"></div>
        `;

        // ‚úÖ SWIPE LISTENERLARINI BIRIKTIRISH
        slidesDiv.addEventListener('touchstart', handleTouchStart, false);
        slidesDiv.addEventListener('touchmove', handleTouchMove, false);
        slidesDiv.addEventListener('touchend', handleTouchEnd, false);
      } else {
        // Agar 1 ta rasm bo'lsa, listenerlarni olib tashlash (agar oldin bo'lgan bo'lsa)
        slidesDiv.removeEventListener('touchstart', handleTouchStart, false);
        slidesDiv.removeEventListener('touchmove', handleTouchMove, false);
        slidesDiv.removeEventListener('touchend', handleTouchEnd, false);
      }
      
      // Boshqaruv elementlarini joylashtirish
      updateSlideControls(images.length);
    }

    window.changeSlide = function(delta){
      const wrapper = document.getElementById('slideWrapper');
      const totalSlides = activeProduct.images.length;
      
      let newSlide = currentSlide + delta;
      if (newSlide < 0) newSlide = totalSlides - 1; // Loop to last
      if (newSlide >= totalSlides) newSlide = 0; // Loop to first
      
      currentSlide = newSlide;
      
      // CSS Transform yordamida slaydni almashtirish
      wrapper.style.transform = `translateX(-${currentSlide * 100}%)`;
      
      updateSlideControls(totalSlides);
    }
    
    function updateSlideControls(totalSlides){
      const indicatorsDiv = document.getElementById('slideIndicators');
      
      if (totalSlides > 1) {
        // Indicatorlarni yangilash
        indicatorsDiv.innerHTML = '';
        for(let i=0; i<totalSlides; i++) {
          const indicator = document.createElement('span');
          indicator.className = `slide-indicator${i === currentSlide ? ' active' : ''}`;
          indicator.onclick = () => {
            currentSlide = i;
            document.getElementById('slideWrapper').style.transform = `translateX(-${currentSlide * 100}%)`;
            updateSlideControls(totalSlides);
          };
          indicatorsDiv.appendChild(indicator);
        }
      }
    }
    
    // --- SWIPE LOGIC START ---
    function handleTouchStart(e) {
        // Faqat bitta barmoq bilan ishlashni nazorat qilish
        if (e.touches.length === 1) {
            touchStartX = e.touches[0].clientX;
        }
    }

    function handleTouchMove(e) {
        // Surish paytida standart hodisalarni (scrollni) o'chirib qo'yish
        // e.preventDefault();
        // Lekin e.preventDefault() butun sahifani surishni bloklashi mumkin.
        // Shuning uchun bu yerda qoldirilmaydi, chunki biz faqat gorizontal surishni qabul qilamiz
    }

    function handleTouchEnd(e) {
        // Agar biron-bir barmoq qolmagan bo'lsa va touchStartX o'rnatilgan bo'lsa
        if (e.changedTouches.length === 0 || touchStartX === 0) return;

        const touchEndX = e.changedTouches[0].clientX;
        const diffX = touchStartX - touchEndX; // Musbat qiymat - chapga surish (next slide)

        if (Math.abs(diffX) > SWIPE_THRESHOLD) {
            if (diffX > 0) {
                // Chapga surish (Swipe Left) -> Keyingi slayd
                changeSlide(1); 
            } else {
                // O'ngga surish (Swipe Right) -> Oldingi slayd
                changeSlide(-1);
            }
        }
        
        // Keyingi surish uchun o'zgaruvchini tozalash
        touchStartX = 0;
    }
    // --- SWIPE LOGIC END ---
    
    // ------------------------------------------------------------------
    // ‚úÖ SLIDER FUNKSIYALARI END
    // ------------------------------------------------------------------


    // product modal
    window.openProductModal = function(id){
      activeProduct = getById(id);
      if (!activeProduct) return;
      modalQty = 1;
      selectedOptions = {}; // ‚úÖ HAR SAFAR YANGILASH
      currentPriceAdjustment = 0; // ‚úÖ HAR SAFAR YANGILASH
      
      // ‚úÖ O'ZGARISH: Slayderni ishga tushirish
      initSlider(activeProduct.images);
      
      modalName.innerText = activeProduct.name[lang] || activeProduct.name.uz;
      
      // ‚úÖ O'ZGARISH: Narxni yangilash funksiyasi birinchi marta chaqirilmoqda
      updateModalTotal(); 
      
      modalShort.innerText = activeProduct.short[lang] || activeProduct.short.uz || '';
      modalExtraDesc.innerText = activeProduct.desc[lang] || activeProduct.desc.uz || '';
      modalQtySpan.innerText = modalQty;
      // Omborda borligini tekshirish (chunki filtr qilingan bo'lishi mumkin)
      modalStockSpan.innerText = activeProduct.stock > 0 ? STOCK_TEXT[lang].in : STOCK_TEXT[lang].out;
      
      // ‚úÖ O'ZGARISH: Opsiyalar/Razmerlarni ko'rsatish
      modalOptionsDiv.innerHTML = ''; // Oldingi elementlarni tozalash
      if (activeProduct.options && activeProduct.options.length > 0) {
        let optionsHtml = '';
        activeProduct.options.forEach(option => {
            const optName = translations[lang][option.type] || option.name[lang] || option.name.uz;
            
            // ‚úÖ RANG (COLOR) UCHUN MAXSUS HTML QISM
            if (option.type === 'color') {
                const colorValue = option.values?.[0]?.value || translations[lang].color_default_value;
                selectedOptions[option.type] = colorValue; 
                optionsHtml += `
                    <div style="margin-bottom:12px">
                        <div style="font-weight:700;margin-bottom:6px">${optName}</div>
                        <p style="margin:0;font-weight: 600; color: #333;">${escapeHtml(colorValue)}</p>
                    </div>
                `;
            } else {
                // Boshqa variantlar (SIZE, LOCK_TYPE) uchun Radio/Tanlash qismi
                let valuesHtml = '';
                
                option.values.forEach((val, index) => {
                    // Birinchi variantni default qilib belgilash
                    if(index === 0) {
                        selectedOptions[option.type] = val.value; 
                    }
                    
                    // Price adjust ko'rsatish 
                    const adjustValue = val.price_adjust || 0;
                    let adjustText = '';
                    if (adjustValue > 0) adjustText = ` (+${formatPrice(adjustValue)})`;
                    else if (adjustValue < 0) adjustText = ` (${formatPrice(adjustValue)})`;
                    
                    // Radio tugmasi sifatida render qilish
                    valuesHtml += `
                        <label style="display:inline-flex;align-items:center;margin-right:12px;cursor:pointer;margin-top:4px">
                            <input type="radio" name="${option.type}" value="${val.value}" data-price-adjust="${adjustValue}" 
                                ${index === 0 ? 'checked' : ''} 
                                onchange="selectOption('${option.type}', this.value, parseFloat(this.getAttribute('data-price-adjust')))">
                            <span style="margin-left:4px;font-size:14px">${val.value}${adjustText}</span>
                        </label>
                    `;
                });
                optionsHtml += `
                    <div style="margin-bottom:12px">
                        <div style="font-weight:700;margin-bottom:6px">${optName}</div>
                        <div style="display:flex;flex-wrap:wrap">${valuesHtml}</div>
                    </div>
                `;
            }
        });
        modalOptionsDiv.innerHTML = optionsHtml;
        
        // Boshlang'ich narxni hisoblash uchun barcha default tanlangan optionlarning narx ta'sirini jamlash
        currentPriceAdjustment = 0;
        activeProduct.options.forEach(option => {
            const defaultValue = selectedOptions[option.type];
            if (defaultValue) {
                const selectedValue = option.values.find(v => v.value === defaultValue);
                if (selectedValue) {
                    currentPriceAdjustment += (selectedValue.price_adjust || 0);
                }
            }
        });
        
        updateModalTotal(); // Variantlar tanlanganidan keyin umumiy narxni yana bir bor yangilash
      }
      
      // SPECS (Optimized: uses activeProduct.specs)
      modalSpecs.innerHTML = '';
      if (activeProduct.specs && activeProduct.specs.length > 0) {
        activeProduct.specs.forEach(spec => {
          const label = spec.label[lang] || spec.label.uz;
          const value = typeof spec.value === 'object' ? (spec.value[lang] || spec.value.uz) : spec.value;
          modalSpecs.innerHTML += `<div class="spec"><div>${escapeHtml(label)}</div><div>${escapeHtml(value)}</div></div>`;
        });
      } else {
        // Fallback for older products or empty specs
        modalSpecs.innerHTML = ''; 
      }

      // fav btn
      const favBtn = document.getElementById('modalFavBtn');
      favBtn.querySelector('i').className = favs.includes(activeProduct.id) ? 'fa-solid fa-heart' : 'fa-regular fa-heart';

      // Stock check for Add to Cart button
      document.getElementById('modalAddBtn').disabled = activeProduct.stock <= 0;

      productModal.style.display = 'flex';
      productModal.setAttribute('aria-hidden','false');
      // hide Telegram MainButton to avoid overlap
      if (tg && tg.MainButton) try{ tg.MainButton.hide(); }catch(e){}
    };

    function closeModal(){
      productModal.style.display = 'none';
      productModal.setAttribute('aria-hidden','true');
      activeProduct = null;
    }

    function updateModalQty(delta){
      modalQty = Math.max(1, modalQty + delta);
      modalQtySpan.innerText = modalQty;
      // ‚úÖ O'ZGARISH: Miqdor o'zgarganda umumiy narxni yangilash
      updateModalTotal(); 
    }

    // Correctly defined modalToggleFav function
    window.modalToggleFav = function(){
      if (!activeProduct) return;
      const id = activeProduct.id;
      const idx = favs.indexOf(id);
      if (idx===-1) favs.push(id); else favs.splice(idx,1);
      localStorage.setItem(FAV_KEY, JSON.stringify(favs));
      
      // Update icon in modal
      document.getElementById('modalFavBtn').querySelector('i').className = favs.includes(id) ? 'fa-solid fa-heart' : 'fa-regular fa-heart';
      
      // Update icon in grid (if visible)
      renderProducts();
      reflectFavBtnState();
    }

    // cart: add/remove/show
    function addToCart(productId, qty=1, options={}, priceAdjust=0){ // ‚úÖ O'ZGARISH: options va priceAdjust qabul qiladi
      
      let item = null;
      // Mahsulotni topish uchun ID va tanlangan Options (Razmer) bir xil bo'lishi kerak
      if (Object.keys(options).length > 0) {
          // Razmer/Color/Lock_Type tanlangan bo'lsa, ID va Options tengligini tekshirish
          item = cart.find(it => 
            it.id === productId && 
            JSON.stringify(it.options) === JSON.stringify(options)
          );
      } else {
          // Razmer/Options bo'lmasa, faqat ID tengligini tekshirish
          item = cart.find(it => it.id === productId && !it.options);
      }

      if (item) item.qty += qty; 
      // ‚úÖ O'ZGARISH: Savatga price_adjust ni saqlash
      else cart.push({id: productId, qty, options, price_adjust: priceAdjust}); 

      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
      showTinyNotif(translations[lang].add_to_cart + ' ‚úì');
      renderFloatingCart();
    }

    function modalAddToCart(){
      if (!activeProduct || activeProduct.stock <= 0) return;
      // ‚úÖ O'ZGARISH: Tanlangan options va currentPriceAdjustment ni yuborish
      addToCart(activeProduct.id, modalQty, selectedOptions, currentPriceAdjustment); 
      closeModal();
    }

    function updateCartCount(){
      const total = cart.reduce((s,i)=>s+i.qty,0);
      cartNumber.innerText = total;
      floatingCount.innerText = total;
    }

    function renderFloatingCart(){
      const el = document.getElementById('floatingCart');
      if (cart.length>0) el.style.display = 'flex'; else el.style.display = 'none';
    }

    function renderCartList(){
      cartListDiv.innerHTML = '';
      
      // XATOLIKNI TUZATISH: products ro'yxatidan o'chirilgan mahsulotlarni ko'rsatishdan oldin chiqarib tashlash
      cart = cart.filter(it => getById(it.id)); 
      localStorage.setItem(CART_KEY, JSON.stringify(cart)); 
      
      if (cart.length === 0){
        cartListDiv.innerHTML = `<div class="empty-state">${translations[lang].cart_empty}</div>`;
        cartTotalDiv.innerText = formatPrice(0);
        document.getElementById('checkoutBtn').disabled = true;
        return;
      }
      document.getElementById('checkoutBtn').disabled = false;
      let total = 0;
      cart.forEach(item=>{
        const p = getById(item.id);
        if (!p) return; // Himoya uchun (yuqorida tozalangan bo'lishi kerak)
        
        // ‚úÖ O'ZGARISH: Narxni price_adjust bilan hisoblash
        const priceAdjust = item.price_adjust || 0;
        const basePrice = p.price + priceAdjust;
        const subtotal = basePrice * item.qty; // basePrice (USD)
        total += subtotal;
        
        // ‚úÖ O'ZGARISH: Options (razmer/color/lock_type) matnini ko'rsatish
        let optionsText = '';
        if (item.options && Object.keys(item.options).length > 0) {
            // Obyekt kalitlari bo'ylab aylanib chiqish (size, color, lock_type)
            Object.keys(item.options).forEach(key => {
                const label = translations[lang][key] || key.charAt(0).toUpperCase() + key.slice(1);
                const value = item.options[key];
                
                // Color opsiyasi uchun maxsus holat
                if (key === 'color' && value === translations[lang].color_default_value) {
                    // Agar standart qiymat bo'lsa, uni ko'rsatmaymiz (yoki sodda ko'rsatamiz)
                    optionsText += `<div class="muted" style="font-size:12px;margin-top:2px;opacity:0.8">${escapeHtml(value)}</div>`;
                } else {
                    optionsText += `<div class="muted" style="font-size:12px;margin-top:2px">${label}: ${escapeHtml(value)}</div>`;
                }
            });
        }
        

        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="cart-media"><img src="${p.images[0]}" alt="${escapeHtml(p.name[lang]||p.name.uz)}"></div>
          <div class="cart-info">
            <div>${escapeHtml(p.name[lang]||p.name.uz)}</div>
            ${optionsText} 
            <div class="muted">${formatPrice(basePrice)} √ó ${item.qty}</div>
          </div>
          <div style="font-weight:800">${formatPrice(subtotal)}</div>
          <button class="btn ghost" title="Remove" onclick="removeFromCart(${p.id})"><i class="fa-solid fa-xmark"></i></button>
        `;
        cartListDiv.appendChild(div);
      });
      cartTotalDiv.innerText = formatPrice(total);
    }

    function removeFromCart(id){
      // Razmer qo'shilganidan keyin faqat ID bo'yicha o'chirish biroz murakkab,
      // chunki bir xil ID li har xil razmerli mahsulotlar bo'lishi mumkin.
      // Hozircha faqat ID bo'yicha o'chiramiz.
      cart = cart.filter(it=>it.id !== id);
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
      renderFloatingCart();
      renderCartList();
    }

    function openCartModal(){
      renderCartList();
      cartModal.style.display = 'flex';
      cartModal.setAttribute('aria-hidden','false');
      if (tg && tg.MainButton) try{ tg.MainButton.hide(); }catch(e){}
    }

    function closeCartModal(){
      cartModal.style.display = 'none';
      cartModal.setAttribute('aria-hidden','true');
    }

    function continueShopping(){ closeCartModal(); }

    function checkout(){
      if (cart.length === 0){
        alert(translations[lang].cart_empty);
        return;
      }
      
      // ‚úÖ TUZATISH 1: products ro'yxatidan o'chirilgan mahsulotlarni savatchadan chiqarib tashlash
      const initialCartLength = cart.length;
      cart = cart.filter(it => getById(it.id)); 
      localStorage.setItem(CART_KEY, JSON.stringify(cart)); 
      
      if (cart.length === 0){
        updateCartCount(); renderFloatingCart(); renderCartList();
        alert(translations[lang].cart_empty);
        return;
      }
      
      // Agar mahsulotlar olib tashlangan bo'lsa, savatchani yangilash
      if (cart.length < initialCartLength) {
          updateCartCount(); 
          renderFloatingCart(); 
          renderCartList();
      }

      // ‚úÖ O'ZGARISH: Order obyekti ichida har bir mahsulotni bitta obyektda saqlab olish
      const orderItems = cart.map(it=>{
          const p = getById(it.id); 
          // O'zgaruvchan narxni hisoblash
          const priceAdjust = it.price_adjust || 0;
          const basePriceUsd = p.price + priceAdjust;

          // Options matnini yig'ish (botga yuborish uchun)
          let optionStr = '';
          if (it.options && Object.keys(it.options).length > 0) {
            optionStr = Object.keys(it.options).map(key => {
                const label = translations[lang][key] || key.charAt(0).toUpperCase() + key.slice(1);
                return `${label}: ${it.options[key]}`;
            }).join(', ');
            optionStr = ` (${optionStr})`;
          }

          // p albatta mavjud
          return {
              id: it.id, 
              name: p.name[lang]||p.name.uz, 
              options: it.options, // Tanlangan variant (masalan, razmer)
              option_str: optionStr, // Bot uchun qulay matn
              qty: it.qty, 
              price_usd: basePriceUsd, 
              price_uzs: Math.round(basePriceUsd * usdSellRate)
          };
      });

      const order = {
        items: orderItems, 
        total_usd: orderItems.reduce((s,i)=> s + (i.price_usd * i.qty), 0),
        total_uzs: orderItems.reduce((s,i)=> s + (i.price_uzs * i.qty), 0),
        ts: new Date().toISOString()
      };
      
      // Sending data to Telegram (for bot processing)
      // Xabar matnini yanada soddalashtirish va mustahkamlash
      const orderText = order.items.map(i => {
          // Narxni to'g'ri hisoblash (basePriceUsd * qty)
          return `${i.qty} x ${i.name}${i.option_str} (${formatPrice(i.price_usd * i.qty)})`; 
      }).join('\n');
      
      const checkoutMessage = `${translations[lang].your_cart}\n\n${orderText}\n\n${translations[lang].total}: ${formatPrice(order.total_usd)}`;

      if (tg && tg.sendData){
        try{ 
          // Botga yuboriladigan ma'lumot (kurs bilan)
          tg.sendData(JSON.stringify({...order, usd_rate: usdSellRate})); 
          showTinyNotif(translations[lang].order_success); 
        }
        catch(e){ 
          console.warn('Telegram sendData failed:', e); 
          alert(translations[lang].order_success + ' (Data not sent to bot)'); 
        }
      } else {
        alert(translations[lang].order_success + '\n\n' + checkoutMessage);
      }
      
      // Clear cart after checkout
      cart = []; localStorage.setItem(CART_KEY, JSON.stringify(cart)); updateCartCount(); renderFloatingCart(); renderCartList();
    }

    // small notification
    function showTinyNotif(text){
      let n = document.getElementById('tiny-notif');
      if (!n) {
          n = document.createElement('div');
          n.id = 'tiny-notif';
          n.style.position='fixed'; n.style.right='16px'; n.style.bottom='90px';
          n.style.background='linear-gradient(90deg,var(--green-500),var(--green-700))'; n.style.color='white';
          n.style.padding='10px 14px'; n.style.borderRadius='12px'; n.style.boxShadow='0 12px 30px rgba(0,200,83,0.16)'; n.style.zIndex=9999;
          n.setAttribute('role', 'alert'); // Accessibility improvement
          n.setAttribute('aria-live', 'assertive'); // Accessibility improvement
          document.body.appendChild(n);
      }
      n.innerText = text;
      n.style.opacity = '1';
      
      clearTimeout(n.timer);
      n.timer = setTimeout(()=> n.style.opacity='0', 1800);
      setTimeout(()=> n.remove(), 2400);
    }

    // small accessibility: ESC to close modals
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape'){
        if (productModal.style.display === 'flex') closeModal();
        else if (cartModal.style.display === 'flex') closeCartModal();
      }
    });

    // Save on unload (optional, redundant with function calls but harmless)
    window.addEventListener('beforeunload', ()=> {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      localStorage.setItem(FAV_KEY, JSON.stringify(favs));
    });

    // expose helpers for debugging (optional)
    window.ecoprom = { products, cart, favs, renderProducts, usdSellRate };
  </script>
</body>

</html>


